{% extends 'base.html' %}
{% block title %} Thank U . Russian Developers {% endblock title %}

{% block content %}

<main>
    <div class="home-container mb-5" id="home">
        <div class="container">
            <!--  -->
            <section class="scroll-section" id="placementTop">
                <h2 class="small-title">Payment Successful</h2>
                <div class="card mb-5">
                    <div class="card-body">
                       
                        <!-- <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvasTop" aria-controls="offcanvasTop">
                            Toggle top offcanvas
                        </button> -->

                        <!-- <div class="offcanvas-body">...</div> -->
                        <div class="offcanvas offcanvas-top show" tabindex="-1" id="offcanvasTop"
                            aria-labelledby="offcanvasTopLabel" style="visibility: visible;" aria-modal="true"
                            role="dialog">
                            <div class="offcanvas-header">
                                <h5 id="offcanvasTopLabel text-primary text-bold text-truncate">Payment Successful</h5>
                                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                                    aria-label="Close"></button>
                            </div>

                            <div class="offcanvas-body">
                                <p class="mb-0">
                                  Thank you for your payment
                                {% if data and data.amount %} ${{ data.amount or None}} {% endif %},
                                    it was processed successfully.
                                </p>

                                <div class="mt-3">
                                    <a href="./us"
                                    class="btn btn-primary btn-icon btn-icon-end btn-xl rounded-xl px-7 me-1 mb-1">
                                    <span>About</span>
                                </a>
                                <a href="./us" target="_blank"
                                    class="btn btn-outline-white btn-xl rounded-xl mb-1 me-1 px-4 data-link">
                                    Connect
                                </a>
                                    </div>

                                </div>

                        </div>
                        <!-- <div class="modal-backdrop fade show"></div> -->
                    </div>
                </div>
            </section>
            <!--  -->
            <section>
                <div class="row">
                    <div class="col-md-6 col-sm-6 col-xl-6 hero-text-container order-1 order-xl-0">
                        <h1 class="display-1 mb-3">
                            <span class="d-block">Intellect</span>
                        </h1>
                        <p class="heading mb-7 pe-lg-6">
                            Building a future where learning fits seamlessly into your everyday life.
                            Let's Mpower busy individuals to acquire skills on their own terms & schedules.
                        </p>
                        <div>
                            <a href="./welcome"
                                class="btn btn-primary btn-icon btn-icon-end btn-xl rounded-xl px-7 me-1 mb-1">
                                <span>Explore Courses</span>
                            </a>
                            <a href="./signin" target="_blank"
                                class="btn btn-outline-white btn-xl rounded-xl mb-1 me-1 px-4 data-link">
                                Sign-in
                            </a>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-md-6 col-sm-6 col-xl-6">
                        <img src="{{url_for('static', filename='./img/course/choose5cb9.jpg')}}" alt="paysafe"
                            style="width: 100%; height: 300px;" class="img-fluid rounded">
                    </div>
                    <!--  -->
                </div>
            </section>
        </div>
    </div>




    {#<div class="container">
        <div class="row">
            <div class="col">
                <div>
                    <section class="scroll-section" id="placementTop">
                        <h2 class="small-title">Payment Successful</h2>
                        <div class="card mb-5">
                            <div class="card-body">
                               
                                <!-- <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
                                    data-bs-target="#offcanvasTop" aria-controls="offcanvasTop">
                                    Toggle top offcanvas
                                </button> -->

                                <div class="offcanvas-body">...</div>
                                <div class="offcanvas offcanvas-top show" tabindex="-1" id="offcanvasTop"
                                    aria-labelledby="offcanvasTopLabel" style="visibility: visible;" aria-modal="true"
                                    role="dialog">
                                    <div class="offcanvas-header">
                                        <h5 id="offcanvasTopLabel">Payment Successful</h5>
                                        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                                            aria-label="Close"></button>
                                    </div>

                                    <div>
                                        <p class="mb-0">
                                          Thank you for your payment, it was processed successfully.
                                        </p>
                                    </div>
                                    
                                        <div>
                                            <a href="./welcome"
                                                class="btn btn-primary btn-icon btn-icon-end btn-xl rounded-xl px-7 me-1 mb-1">
                                                <span>Explore Courses</span>
                                            </a>
                                            <a href="./signin" target="_blank"
                                                class="btn btn-outline-white btn-xl rounded-xl mb-1 me-1 px-4 data-link">
                                                Sign-in
                                            </a>
                                        </div>

                                </div>
                                <!-- <div class="modal-backdrop fade show"></div> -->
                            </div>
                        </div>
                    </section>
                </div>
            </div>

        </div>
    </div>#}
</main>
{% block page_js %}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Function to get query parameters
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                make_pay: params.get('make_pay')
            };
        }

        // Check if make_pay is true
        const queryParams = getQueryParams();
        if (queryParams.make_pay === 'true') {
            console.log("e suppose scroll")
            // Scroll to the element
            document.getElementById('support_us_h').scrollIntoView({ behavior: 'smooth' });
        }
    });
</script>

<script>
    // Highlight selected amount and update the input field
    document.querySelectorAll('.amount-btn').forEach(function (button) {
        button.addEventListener('click', function () {
            // Remove highlight from all buttons and revert to primary
            document.querySelectorAll('.amount-btn').forEach(function (btn) {
                btn.classList.remove('btn-outline-white');
                btn.classList.add('btn-outline-primary');
            });

            // Highlight the clicked button
            button.classList.remove('btn-outline-primary');
            button.classList.add('btn-outline-white');

            // Set the selected amount
            const selectedAmount = button.getAttribute('data-amount').trim();
            document.getElementById('amount').value = selectedAmount;
        });
    });

    // Handle custom amount input
    document.getElementById('amount').addEventListener('input', function () {
        const customAmount = this.value.trim();
        document.getElementById('amount').value = customAmount;

        // Remove the highlight from all buttons when custom amount is typed
        document.querySelectorAll('.amount-btn').forEach(function (btn) {
            btn.classList.remove('btn-outline-white');
            btn.classList.add('btn-outline-primary');
        });
    });

    // Handle form submission
    document.getElementById('submit-payment').addEventListener('click', function (event) {
        event.preventDefault(); // Prevent default form submission

        // add spinner
        const submitButton = this;
        submitButton.disabled = true; // Disable the button
        submitButton.innerHTML = 'Processing... <span class="spinner-border spinner-border-sm"></span>'; // Add spinner

        const form = document.getElementById('payment-form');
        const formData = new FormData(form);
        // Log form data entries
        /* for (let [key, value] of formData.entries()) {
              console.log(key, value);
          }
          console.log(form.action) */
        fetch(form.action, {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('response-message').innerHTML = `<div class="alert alert-success"> ${data.message}</div>`;
                    window.location.href = data.redirect_url; // Redirect on success
                } else {
                    // alert(data.error || 'Something went wrong. Please try again.');
                    document.getElementById('response-message').innerHTML = `<div class="alert alert-danger"> -> ${data.error}</div>`;
                }
            })

            .catch(error => console.error('Error:', error))

            .finally(() => {
                submitButton.disabled = false; // Re-enable the button
                submitButton.innerHTML = 'Submit Payment'; // Reset button text
            });
    });

</script>
{% endblock page_js %}

{% endblock content %}